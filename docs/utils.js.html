<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: utils.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: utils.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { giveSemanaAno, giveSemanaSemestre } from './calcSemanas';


/**
 * Data Parse Salas
 * @param {String} csvDataSalas - Conteudo do ficheiro CSV acerca das salas
 * @returns {String} - Conteudo do ficheiro CSV em formato JSON
 */
function dataParseSalas(csvDataSalas){
    const data = fixTextLocal(csvDataSalas);
    //console.log(data);
    const lines = data.split('\n');
    const headers = lines[0].split(';');
    //console.log(headers);
    const jsonArray = [];
    for(let i = 1; i &lt; lines.length; i++){
        const values = lines[i].split(';');
        const jsonObj = {};
        for(let j = 0; j &lt; headers.length; j++){
            jsonObj[headers[j]] = values[j];
        }
        jsonArray.push(jsonObj);
    }
    return JSON.stringify(jsonArray);
}


/**
 * Data Parse Horario
 * @param {String} csvData - Conteudo do ficheiro CSV acerca do horário
 * @returns {String} - Conteudo do ficheiro CSV em formato JSON
 */
function dataParseHorario(csvData){ //não usa tabulator
    const lines = csvData.split('\n');
    const headers = lines[0].split(';');
    headers.push("Semana do Ano", "Semana do Semestre");
    const jsonArray = [];
    for(let i = 1; i &lt; lines.length; i++){
        const values = lines[i].split(';');
        const jsonObj = {};
        for(let j = 0; j &lt; headers.length - 2; j++){
            if(headers[j].includes("Data")){
                jsonObj[headers[j]] = values[j];
                const semanaAno = giveSemanaAno(values[j]);
                const semanaSemestre = giveSemanaSemestre(values[j]);
                jsonObj[headers[headers.length - 2]] = semanaAno;
                jsonObj[headers[headers.length - 1]] = semanaSemestre;
            } else if(headers[j].includes("atribuída")){
                values[j] = values[j].replace(/\r/g, '');
                headers[j] = headers[j].replace(/\r/g, '');
                jsonObj[headers[j]] = values[j];
            } else {
                jsonObj[headers[j]] = values[j];
            }
        }
        jsonArray.push(jsonObj);
    }
    return JSON.stringify(jsonArray);

}


/**
 * Fix Text
 * @param {String} csvDataSalas - Conteudo do ficheiro CSV acerca das salas
 * @returns {String} - Conteudo do ficheiro CSV acerca das salas com texto devidamente corrigido
 */
function fixTextLocal(csvDataSalas){
    const fixedText = csvDataSalas
        .replace(/’/g, 'í')
        .replace(/¼/g, 'º')
        .replace(/Ž/g, 'é')
        .replace(/‡/g, 'á')
        .replace(/œ/g, 'ú')
        .replace(/—/g, 'ó')
        .replace(/videoconferncia/g, 'ê')
        .replace(/çtrio/g, 'átrio')
        .replace(/Reuni‹o/g, 'Reunião')
        .replace(/Balc‹o/g, 'Balcão')
        .replace(/Recep‹o/g, 'Recepção')
        .replace(/Edif�cio/g, 'Edifício')
        .replace(/N� caracter�sticas/g, 'Nº características')
        .replace(/t�cnico/g, 'técnico')
        .replace(/Hor�rio/g, 'Horário')
        .replace(/vis�vel/g, 'visível')
        .replace(/p�blico/g, 'público')
        .replace(/Laborat�rio/g, 'Laboratório')
        .replace(/Electr�nica/g, 'Electrónica')
        .replace(/Inform�tica/g, 'Informática')
        .replace(/Telecomunica��es/g, 'Telecomunicações')
        .replace(/Reuni�o/g, 'Reunião')
        .replace(/videoconfer�ncia/g, 'videoconferência')
        .replace(/�trio/g, 'átrio')
        .replace(/M�rio/g, 'Mário')
        .replace(/Aut�noma/g, 'Autónoma')
        .replace(/Audit�rio/g, 'Auditório')
        .replace(/Espa�o Exposi��es/g, 'Espaço Exposições')
        .replace(/Balc�o Recep��o/g, 'Balcão Recepção')
        .replace(/Balne�rio/g, 'Balneário')
        .replace(/Telecomunica›es/g, 'Telecomunicações');

    return fixedText;

};

export { dataParseHorario, dataParseSalas, fixTextLocal};</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#addEventListeners">addEventListeners</a></li><li><a href="global.html#createTableHorario">createTableHorario</a></li><li><a href="global.html#createTableSalas">createTableSalas</a></li><li><a href="global.html#currentWeekNumber">currentWeekNumber</a></li><li><a href="global.html#dataParseHorario">dataParseHorario</a></li><li><a href="global.html#dataParseSalas">dataParseSalas</a></li><li><a href="global.html#downloadCSV">downloadCSV</a></li><li><a href="global.html#downloadJSON">downloadJSON</a></li><li><a href="global.html#fixTextLocal">fixTextLocal</a></li><li><a href="global.html#gitHubCSVHorario">gitHubCSVHorario</a></li><li><a href="global.html#gitHubCSVSalas">gitHubCSVSalas</a></li><li><a href="global.html#giveSemanaAno">giveSemanaAno</a></li><li><a href="global.html#giveSemanaSemestre">giveSemanaSemestre</a></li><li><a href="global.html#headerFilters">headerFilters</a></li><li><a href="global.html#resetFilters">resetFilters</a></li><li><a href="global.html#table">table</a></li><li><a href="global.html#tablefinal">tablefinal</a></li><li><a href="global.html#toggleFilter">toggleFilter</a></li><li><a href="global.html#turnToDate">turnToDate</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Tue Apr 23 2024 23:14:51 GMT+0100 (Hora de verão da Europa Ocidental)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
